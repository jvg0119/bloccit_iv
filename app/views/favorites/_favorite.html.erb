
<% if favorite = current_user.favorite_for(post) %>
  <%#= link_to "Unfavorite", post_favorite_path(post, favorite), method: :delete, class: "btn btn-danger glyphicon glyphicon-star-empty" %>
  <%= link_to [post, favorite], method: :delete, class: "btn btn-danger" do %>
    <i class="glyphicon glyphicon-star-empty"></i> &nbsp; Unfavorite
  <% end %>

<% else %>
  <%#= link_to post_favorites_path(post), class: 'btn btn-primary', method: :post do %><!-- this is also OK -->
  <%= link_to [post, Favorite.new], class: 'btn btn-primary', method: :post do %>
    <i class="glyphicon glyphicon-star"></i> &nbsp; Favorite
  <% end %>

<% end %>
